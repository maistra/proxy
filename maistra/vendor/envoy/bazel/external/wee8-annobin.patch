# https://issues.redhat.com/browse/MAISTRA-2048
# https://issues.redhat.com/browse/MAISTRA-600
--- wee8/BUILD.gn
+++ wee8/BUILD.gn
@@ -866,7 +866,13 @@
   visibility = [ "./*" ]
 
   defines = []
-  cflags = []
+  cflags = ["-fplugin=annobin", "-fstack-clash-protection", "-fstack-protector-all", "-fstack-protector-strong", "-fPIE", "-fexceptions", "-D_GLIBCXX_ASSERTIONS", "-D_GLIBCXX_USE_CXX11_ABI", "-Wall"]
+  if (v8_current_cpu == "x64") {
+    cflags += ["-fcf-protection=full"]
+  }
+  if (!is_debug) {
+    cflags += ["-D_FORTIFY_SOURCE=2", "-O2"]
+  }
   ldflags = []
 
   if (v8_current_cpu == "arm") {
