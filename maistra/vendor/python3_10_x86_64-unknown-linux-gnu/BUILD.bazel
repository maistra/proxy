# Generated by python/repositories.bzl

load("@bazel_tools//tools/python:toolchain.bzl", "py_runtime_pair")

package(default_visibility = ["//visibility:public"])

filegroup(
    name = "files",
    srcs = glob(
        include = ["bin/**", "extensions/**", "include/**", "lib/**", "libs/**", "share/**"],
        # Platform-agnostic filegroup can't match on all patterns.
        allow_empty = True,
        exclude = [
            "**/* *", # Bazel does not support spaces in file names.
            # Unused shared libraries. `python` executable and the `:libpython` target
            # depend on `libpython3.10.so.1.0`.
            "lib/libpython3.10.so",
            # static libraries
            "lib/**/*.a",
            # tests for the standard libraries.
            "lib/python3.10/**/test/**",
            "lib/python3.10/**/tests/**",
        ],
    ),
)

filegroup(
    name = "includes",
    srcs = glob(["include/**/*.h"]),
)

cc_library(
    name = "python_headers",
    hdrs = [":includes"],
    includes = [
        "include",
        "include/python3.10",
        "include/python3.10m",
    ],
)

cc_import(
    name = "libpython",
    hdrs = [":includes"],
    shared_library = select({
        "@platforms//os:windows": "python3.dll",
        "@platforms//os:macos": "lib/libpython3.10.dylib",
        "@platforms//os:linux": "lib/libpython3.10.so.1.0",
    }),
)

exports_files(["python", "bin/python3"])

py_runtime(
    name = "py3_runtime",
    files = [":files"],
    interpreter = "bin/python3",
    python_version = "PY3",
)

py_runtime_pair(
    name = "python_runtimes",
    py2_runtime = None,
    py3_runtime = ":py3_runtime",
)
